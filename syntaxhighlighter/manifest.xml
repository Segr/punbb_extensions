<?xml version="1.0" encoding="utf-8"?>

<extension engine="1.0">
	<id>syntaxhighlighter</id>
	<title>SyntaxHighlighter</title>
	<version>1.0.5</version>
	<description>Highlights code tags using Alex Gorbatchev`s SyntaxHighlighter.</description>
	<author>Segr</author>
	<minversion>1.3</minversion>
	<maxtestedon>1.4.4</maxtestedon>
	<install><![CDATA[
		]]></install>
	<uninstall><![CDATA[
		    ]]></uninstall>
	<hooks>
		<hook id="hd_head"><![CDATA[
			if (FORUM_PAGE=='post' || FORUM_PAGE=='viewtopic') {
				$forum_head['syntaxhighlighter_js1'] = '<script type="text/javascript" src="'.$ext_info['url'].'/scripts/shCore.js"></script>';
				$forum_head['syntaxhighlighter_js2'] = '<script type="text/javascript" src="'.$ext_info['url'].'/scripts/shBrushVb.js"></script>';
				$forum_head['syntaxhighlighter_css'] = '<link rel="stylesheet" type="text/css" media="screen" href="'.$ext_info['url'].'/styles/shCoreDefault.css" />';
				$forum_head['syntaxhighlighter_js3'] = '<script type="text/javascript">SyntaxHighlighter.all();</script>';
			}
		]]></hook>
		
		<hook id="ps_parse_message_post_merge"><![CDATA[
			$text = str_replace('<div class="codebox"><pre><code>', '<div class="codebox"><pre class="brush: vb;">', $text);
			$text = str_replace('</code></pre></div>', '</pre></div>', $text);
		]]></hook>
	</hooks>
</extension>
